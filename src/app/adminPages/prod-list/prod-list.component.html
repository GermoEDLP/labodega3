<div class="row">
  <div class="col-lg-12">
    <section class="panel" *ngIf="charge; else loading">
      <header class="panel-heading">
        Lista de productos
        <span
          [routerLink]="['/admin', 'newProd', 'nuevo']"
          class="pull-right"
          title="Agregar nuevo"
          ><button class="btn btn-success"><i class="fa fa-plus"></i></button
        ></span>
      </header>
      <div class="table-responsive">
        <table class="table table-striped table-advance table-hover">
          <tbody>
            <tr>
              <th></th>
              <th>Nombre</th>
              <th>Precio</th>
              <th>Stock</th>
              <th>Categoria</th>
              <th>Acciones</th>
            </tr>
            <tr *ngFor="let prod of productos">
              <td><img [src]="prod.image" alt="{{ prod.name }}" /></td>
              <td><a class="nombre" [routerLink]="['/product', prod.id]" target="_blank" >{{ prod.name }}</a></td>
              <td>{{ prod.price | number: "1.2-2" }}</td>
              <td>{{ prod.stock }}</td>
              <td *ngIf="productos">
                <a 
                [routerLink]="cat.link"
                target="_blank"
                *ngFor="let cat of prod.cat | cats: categorias:'lista'">
                  <span
                    class="label label-primary"
                    >{{ cat.name }}</span
                  >
                </a>
              </td>
              <td>
                <div class="btn-group">
                  <a
                    class="btn btn-primary"
                    [routerLink]="['/admin', 'newProd', prod.id]"
                    title="Editar"
                    ><i class="icon_pencil"></i
                  ></a>
                  <a
                    class="btn btn-danger"
                    (click)="borrarProducto(prod)"
                    title="Eliminar"
                    ><i class="icon_close_alt2"></i
                  ></a>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
    <ng-template #loading>
      <app-loading></app-loading>
    </ng-template>
  </div>
</div>
