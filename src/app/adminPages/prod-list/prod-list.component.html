<div class="row">
  <div class="col-lg-12">
    <section class="panel" *ngIf="charge; else loading">
      <header class="panel-heading">
        Lista de faltantes
        <span
          [routerLink]="['/admin', 'newProd', 'nuevo']"
          class="pull-right"
          title="Agregar nuevo"
          ><button class="btn btn-success"><i class="fa fa-plus"></i></button
        ></span>
      </header>
      <div class="table-responsive">
        <table class="table table-advance">
          <tbody>
            <tr>
              <th></th>
              <th>Nombre</th>
              <th>Desc.</th>
              <th>Precio</th>
              <th>Stock</th>
              <th>Disponible</th>
              <th>Categoria</th>
              <th>Acciones</th>
            </tr>
            <tr
              *ngFor="let prod of productos | product: true:'stock'"
              class="danger"
            >
              <td><img [src]="prod.image" alt="{{ prod.name }}" /></td>
              <td>
                <a
                  class="nombre"
                  [routerLink]="['/product', prod.id]"
                  target="_blank"
                  >{{ prod.name }}</a
                >
              </td>
              <td>{{prod.desc}}</td>
              <td>{{ prod.price | number: "1.2-2" }}</td>
              <td>
                <a class="btn btn-danger" (click)="variarStock(prod)">{{
                  prod.stock
                }}</a>
              </td>
              <td
                (click)="cambiarEstado(prod.id, prod.show)"
                style="cursor: pointer"
              >
                <span
                  class="label"
                  [ngClass]="{
                    'label-danger': !prod.show,
                    'label-success': prod.show
                  }"
                  >{{ prod.show | productList: "list" }}</span
                >
              </td>
              <td *ngIf="productos">
                <a
                  [routerLink]="cat.link"
                  target="_blank"
                  *ngFor="let cat of prod.cat | cats: categorias:'lista'"
                >
                  <span class="label label-primary">{{ cat.name }}</span>
                </a>
              </td>
              <td>
                <div class="btn-group">
                  <a
                    class="btn btn-primary"
                    [routerLink]="['/admin', 'newProd', prod.id]"
                    title="Editar"
                    ><i class="icon_pencil"></i
                  ></a>
                  <a
                    class="btn btn-danger"
                    (click)="borrarProducto(prod)"
                    title="Eliminar"
                    ><i class="icon_close_alt2"></i
                  ></a>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
      <section class="panel" *ngIf="charge; else loading">
        <header class="panel-heading">
          Lista completa
          <span class="pull-right" style="display: inline-flex !important;">
            <span style="margin-right: 5px;">Orden: </span>
            <select class="form-control" name="search" id="search" [(ngModel)]="searchList">
              <option value="name">Nombre</option>
              <option value="price">Precio</option>
              <option value="stock">Stock</option>
              <option value="show">Disponible</option>
            </select>
          </span>
        </header>
      <div class="table-responsive">
        <table class="table table-striped table-advance table-hover">
          <tbody>
            <tr>
              <th></th>
              <th>Nombre</th>
              <th>Desc.</th>
              <th>Precio</th>
              <th>Stock</th>
              <th>Disponible</th>
              <th>Categoria</th>
              <th>Acciones</th>
            </tr>
            <tr *ngFor="let prod of productos | product: true: 'order': searchList">
              <td><img [src]="prod.image" alt="{{ prod.name }}" /></td>
              <td>
                <a
                  class="nombre"
                  [routerLink]="['/product', prod.id]"
                  target="_blank"
                  >{{ prod.name }}</a
                >
              </td>
              <td>{{prod.desc}}</td>
              <td>{{ prod.price | number: "1.2-2" }}</td>
              <td>
                <a class="btn btn-default" (click)="variarStock(prod)">{{
                  prod.stock
                }}</a>
              </td>
              <td
                (click)="cambiarEstado(prod.id, prod.show)"
                style="cursor: pointer"
              >
                <span
                  class="label"
                  [ngClass]="{
                    'label-danger': !prod.show,
                    'label-success': prod.show
                  }"
                  >{{ prod.show | productList: "list" }}</span
                >
              </td>
              <td *ngIf="productos">
                <a
                  [routerLink]="cat.link"
                  target="_blank"
                  *ngFor="let cat of prod.cat | cats: categorias:'lista'"
                >
                  <span class="label label-primary">{{ cat.name }}</span>
                </a>
              </td>
              <td>
                <div class="btn-group">
                  <a
                    class="btn btn-primary"
                    [routerLink]="['/admin', 'newProd', prod.id]"
                    title="Editar"
                    ><i class="icon_pencil"></i
                  ></a>
                  <a
                    class="btn btn-danger"
                    (click)="borrarProducto(prod)"
                    title="Eliminar"
                    ><i class="icon_close_alt2"></i
                  ></a>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
    <ng-template #loading>
      <app-loading></app-loading>
    </ng-template>
  </div>
</div>
